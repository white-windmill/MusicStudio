---
title: 基于Flutter的音乐播放系统
author:
  - 柯俊锐(1910080303)
  - 应瑞琦(1910080221)
  - 易靖凯(1935010205)
description: |
  我们开发了一个基于Flutter的音乐播放系统，
  它前端采用dart/Flutter框架，后端采用Python/Django，
  实现了歌曲播放、社区以及歌单管理功能
---

# 一、项目介绍 [应瑞琦、柯俊锐、易靖凯]

## 背景

​        市面上音乐APP很多，但功能上过于繁杂，许多页面对大部分用户来说，即使天天使用APP，也不会点击。对于过多、过于凌乱的页面，用户只能视而不见，只关注自己喜欢以及最常使用的页面。所以我们的APP致力于一个没有杂乱而体验差的UI页面的APP，提取出用户想要的，保留用户最关心的部分，简洁的页面给人舒畅的体验。与此同时，几乎所有音乐APP都需要会员，很多歌曲甚至有了会员还需要充值，吃相难看，音乐与金钱挂钩后似乎也失去了原本的意义。所以我们考虑是否可以做一个没有会员即可畅享的APP来满足只想安安静静听音乐的用户。所以总体上的想法是摒弃过于繁杂的功能，只追求最简单，最纯粹的使用。

## 项目需求分析

​       项目主要需要实现用户系统、歌单功能、社区模块、播放功能。

​        用户系统贯穿整个项目，每个用户都可以根据自己的喜好来制定属于自己的信息，包括昵称、头像、个性标签，所有内容均绑定唯一的用户ID，发帖、收藏歌单、歌曲均发送至后端数据库存储其中，推荐歌单与排行榜可以为用户提供新的资讯以及当下最热的歌曲，为用户带了播放的更多选择。其中的歌单与歌曲都可以单独收藏以方便用户根据自己的喜好对歌曲进行分类。

​        社区模块作为用户之间沟通的主要模块，拥有发帖、浏览、对自己喜欢的帖子喜欢、评论等操作，用于提出对别人的看法的意见或者建议。

​        音乐播放作为核心功能，所有的歌曲点击即可播放并跳转至播放页面，在此页面，用户可以添加歌曲至喜欢，也可以为此首歌添加当下的音乐足迹。

## 计划和分工

应瑞琦：社区发帖，社区界面，社区帖子评论点赞功能，主页，编辑推荐，收藏歌单，排行榜，个人空间。

易靖凯： API接口设计，数据库设计，后端实现。

柯俊锐：登录注册功能，音乐播放界面，搜索歌曲功能，个人信息查看与修改，个人歌单管理，音乐足迹模块。

# 二、界面原型设计 [应瑞琦、柯俊锐]

## 整体设计图

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps1.jpg) 

 

##  设计细节      

​        跳转的实现是通过将各个页面的名字放在默认路由表中，并且用路径指代各个页面，通过路由表实现跳转：

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps2.jpg) 

​          登录页面，登录成功后跳转到导航页面：

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps3.jpg) 

​         或是直接采用对应界面的名称进行跳转：

​         在搜索框输入关键词后点击跳转，跳转到SearchResultPage界面：

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps4.jpg) 

 

### 1.登录界面

​      由输入的手机号与密码用于登录账号，若正确则进入主界面。点击忘记密码或注册新用户，则点击对应按钮之后，跳转至对应界面，完成相应功能。该界面主要功能在于登录，所以将输入账号密码置于中心，其余两个功能则在下面较小。使界面有条理，一目了然，符合用户的操作习惯。

 ![image-20220610084702396](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610084702396.png)

### 2.主页面

​       分为三部分，轮播图、编辑精选、排行榜。其中，轮播图可以展示特定的歌曲的封面，“编辑精选”可以显示由编辑推荐的歌单，点击后可以跳转至歌单细节，显示了当前歌单内的歌曲，并可以点击播放界面。若喜欢此歌单，可以在歌单的上部可以点击收藏歌单。(图标为红色时为已收藏)，点击进入排行榜之后，则类似与歌单内部，但在每首歌曲前方有标号，代表排名。

 ![](C:\Users\易靖凯\Desktop\777777.PNG)<img src="C:\Users\易靖凯\Desktop\图片133.png" style="zoom:25%;" />



### 3.歌曲播放界面

​        在歌曲的播放界面，双击与单击加号即可完成不同的动作。使用单击则添加一条音乐足迹，记录当下的心情，双击则可以在弹出的提示框内选择想要的歌单进行添加。后续即可在我的歌单处看到收藏的对应歌单内看到歌曲并播放。

 

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps18.png)![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps19.png) 

 

### 4.社区界面

​        首先看到的是按时间排序的帖子，其中，最新的帖子在最上部，方便查看。每条帖子都有属于它自己的“点赞”、“评论”、“分享”功能。点击后即可完成动作或者跳转至对应界面，方便用户操作。而发布帖子功能通过悬浮按钮的方式在页面右下方，点击后即跳转，在输入需要发布的内容后点击按钮即可发布。点击头像后可以跳转至对应发帖人的空间内查看其所有帖子。

 

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps20.png" alt="img" style="zoom:50%;" /><img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps21.png" alt="img" style="zoom:50%;" /><img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps22.png" alt="img" style="zoom:50%;" /><img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps23.png" alt="img" style="zoom:50%;" /> 

### 5.个人页面

​       个人页面显示了用户的头像、用户名和个人简介，以及五个跳转

#### 主页面

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps24.png) 

#### 点击头像和名称栏

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps25.png) 

#### 点击我的收藏

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps26.png) 

#### 点击我的歌单

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps27.png) 

#### 点击音乐足迹

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps28.png) 

#### 点击我的发布

#### <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610091208764.png" alt="image-20220610091208764" style="zoom:25%;" />

# 三、系统架构设计 [ 应瑞琦、易靖凯]

## 前端架构

<img src="C:\Users\易靖凯\Desktop\图片1000.png" style="zoom: 50%;" />

## 后端架构

![后端模块.PNG](https://github.com/white-windmill/MusicStudio/blob/main/docs/%E5%85%B3%E7%B3%BB%E8%AE%BE%E8%AE%A1/%E5%90%8E%E7%AB%AF%E6%A8%A1%E5%9D%97.PNG?raw=true)

# 四、API设计 [易靖凯]

## 4.1 API管理

​        API设计我们使用的是eolink，是和APIfox类似的api接口管理应用，eolink支持快速测试，还可以通过url分享项目接口，支持JSON、form-data等多种类型数据测试，还支持将测试返回的结果当作示例，后端开发测试完成之后前端同学可以通过返回示例查看。

## 4.2 API规范

​       我们的接口使用了restful的api规范，RESTful的核心思想就是，客户端发出的数据+操作指令都是'动词+宾语'的结构，比如GET /article这个命令，GET是动词，/articles是宾语，动词通常就有5种HTTP请求方法，对应CRUD操作，根据 HTTP 规范，动词一律大写。GET方法对应查询操作，POST方法对应新增操作，PUT方法对应更新操作，DELETE对应删除操作。PATCH部分更新，我们项目比较小，所以我们只使用了前四种method方法。如果前端请求方式是GET方法，那么参数要携带在路径里，例如/api/user/?userid=xxx&password=xxx/，如果请求方式是POST、PUT、DEL的传参方式都是JSON格式，例如{'userid':'xxxx','password':'xxxx',.....}，如果是发布社区帖子或者修改用户信息的两个POST接口要携带图片的FILE文件，前端的传参格式为form-data。

## 4.3 API设计

### 创建歌单

#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/creat/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
表单

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|playlistname|歌单名称|是|[string]| | | |
|userid|用户id|是|[string]| | | |
|playlistimge|歌单封面|否|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/creat/&resultType=failure
```
{"ret": 0}
```

### 获取歌单内容
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/

**请求协议**
HTTP

**请求方法**
GET

**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|playlistname|歌单名称|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/&resultType=failure
```
{"ret": 0, "data": [{"musicid": "132165498", "musicname": "\u9752\u82b1\u74f7", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u8303\u7279\u897f"}, {"musicid": "78378378", "musicname": "\u767d\u8272\u98ce\u8f66", "musicsinger": "\u767d\u8272\u98ce\u8f66", "musicalbum": "\u8303\u7279\u897f"}]}
```
### 判断是否收藏过改歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/ret/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]|| |
|playlistname|歌单名称|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/ret/&resultType=failure
```
{"ret": 1}
```
### 取消收藏歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
|playlistname|歌单名称|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/&resultType=failure
```
{"ret": 0}
```
### 删除歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/del/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|playlistname|歌单名称|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/del/&resultType=failure
```
{"ret": 0}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/del/
```
{"ret": 1, "data": "\u4e0d\u662f\u60a8\u521b\u5efa\u7684\u6b4c\u5355\uff01"}
```
### 收藏歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|playlistname|歌单名称|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/&resultType=failure
```
{"ret": 0}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/
```
{"ret": 1, "msg": "\u60a8\u5df2\u7ecf\u6536\u85cf\u8fc7\u8be5\u6b4c\u5355\u4e86\uff0c\u8bf7\u4e0d\u8981\u91cd\u590d\u6536\u85cf"}
```
### 取消收藏歌曲
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/music/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|musicid|用户id|是|[string]| | | |
|playlistname|歌单名称|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/music/&resultType=failure
```
{"ret": 0}
```
### 收藏歌曲
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/music/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
|playlistname|白色风车|是|[string]| | | |
|musicid|音乐id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/music/&resultType=failure
```
{"ret": 0}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/music/
```
{"ret": 1, "msg": "\u8be5\u6b4c\u66f2\u5df2\u7ecf\u5728\u5f53\u524d\u6b4c\u5355\u91cc\u4e86"}
```
### 提交播放记录
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/history/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
|listentime|听歌时间|是|[datetime]| | | |
|musicid|音乐id|是|[string]| | | |
|perception|感悟|是|[string]| | | |
|musicname|音乐名|是|[string]| | | |
|musicsinger|歌手名|是|[string]| | | |
|musicalbum|歌曲所在专辑|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/history/&resultType=failure
```
{"ret": 0}
```
### 获取播放记录
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/history/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|数据|是|[json]| || |

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/history/&resultType=failure
```
{"ret": 0, "data": [{"id": 37, "listentime": "2022-06-09T00:54:54.598Z", "musicid_id": "516728102", "perception": "\u5f00\u5fc3", "userid_id": "15860861473", "musicname": "\u6d6a\u5b50\u56de\u5934"}]}
```
### 删除历史记录
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/history/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/history/&resultType=failure
```
{
    "ret":0
}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/history/
```
{
    "ret":1
}
```
### 点赞
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/

**请求协议**
HTTP

**请求方法**
PUT


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|文章id|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/&resultType=failure
```
{"ret": 0}
```
### 取消点赞
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/del/

**请求协议**
HTTP

**请求方法**
PUT


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|文章id|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

### 获取评论
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/comment/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|文章id|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/comment/&resultType=failure
```
{"ret": 0, "data": [{"comment": [{"id": 2, "commenttime": "2021-05-21T10:21:00Z", "articleid_id": "5", "userid_id": "1935010206", "commentcontent": "1111", "userdata": {"username": "JingkaiYi", "password": "newpassword", "userid": "1935010206", "information": "newinformati", "briefintroduction": "newintroduce", "userimage": "img/222.png"}}]}
```
### 评论
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/comment/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|文章id|是|[string]| | | |
|userid|评论人的id|是|[string]| | | |
|commentcontent|评论内容|是|[string]| | | |
|commenttime|评论时间|是|[datetime]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/comment/&resultType=failure
```
{"ret": 0}
```
### 删除评论
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/comment/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
|articleid|文章id|是|[string]| | | |
|content|评论内容|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/comment/&resultType=failure
```
{
    "ret":0
}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/comment/
```
{
    "ret":1
}
```
### 查找帖子
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/search/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|查找内容|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret| |是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/search/&resultType=failure
```
{
    "ret":1
}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/search/
```
{
    "ret":1
}
```
### 发布帖子
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
表单

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]| | | |
|articlecontent|文章内容|是|[string]| | | |
|articletime|发布时间|是|[string]| | | |
|articlepic1|图片1|否|[file]| | | |
|articlepic2|图片2|否|[file]| | | |
|articlepic3|图片3|否|[file]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret| |是|[int]| || |

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/&resultType=failure
```
{"ret": 0}
```
### 获得个人发布帖子
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/&resultType=failure
```
{"ret": 0, "data": [{"articleid": "19350102052021-12-4 18:45", "articlecontent": "\u6d4b\u8bd5", "articlelike": 0, "articlecomment": 0, "articletime": "2021-12-04T18:45:00Z", "articlepic1": "img/111_vfRNhUP.png", "articlepic2": "img/222_mTPoOJn.png", "articlepic3": "img/1255_4j41heE.png", "userid_id": "1935010205", "comment": []}]}
```
### 获得所有帖子
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/all/

**请求协议**
HTTP

**请求方法**
GET

**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/all/&resultType=failure
```
{"ret": 0, "data": [{"articleid": "19350102052021-12-4 18:45", "articlecontent": "\u6d4b\u8bd5", "articlelike": 0, "articlecomment": 0, "articletime": "2021-12-04T18:45:00Z", "articlepic1": "img/111_vfRNhUP.png", "articlepic2": "img/222_mTPoOJn.png", "articlepic3": "img/1255_4j41heE.png", "userid_id": "1935010205", "articleuserdata": {"username": "wecwecw", "password": "12345678", "userid": "1935010205", "information": "333", "briefintroduction": "222", "userimage": "img/1255.png"}, "comment": []}}]}
```
### 删除帖子
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/

**请求协议**
HTTP

**请求方法**
DELETE


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|帖子id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret| |是|[int]| || |

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/article/&resultType=failure
```
{"ret": 0}
```
### 修改帖子内容
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/article/

**请求协议**
HTTP

**请求方法**
PUT


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|articleid|文章id|是|[string]| | | |
|userid|用户id|是|[string]| | | |
|data|修改之后的内容|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret| |是|[int]| || |

### 搜索歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/search/playlist/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|search|歌单关键字|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/search/playlist/&resultType=failure
```
{"ret": 0, "data": [{"id": 91, "playlistname": "Lemon", "musicid_id": "405998841", "playlistimage": "img/www.baidu_2.webp", "playlistfounder": "default"}]}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/search/playlist/
```
{"ret": 1, "msg": "\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6b4c\u5355"}
```
### 搜索歌曲
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/search/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|search|搜索的i歌曲或者歌手关键字|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|只有当该判断数为0时说明返回值正常|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/search/&resultType=failure
```
{"ret": 0, "data": [{"musicid": "121244", "musicname": "\u4e03\u91cc\u9999", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u8303\u7279\u897f", "sub": 0}, {"musicid": "1477502894", "musicname": "\u9752\u82b1\u74f7", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u83ca\u82b1\u53f0", "sub": 1}, {"musicid": "71637167", "musicname": "\u544a\u767d\u6c14\u7403", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u544a\u767d\u6c14\u7403", "sub": 2}, {"musicid": "78378378", "musicname": "\u591c\u66f2", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u591c\u66f2", "sub": 3}]}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/search/
```
{"ret": 1, "msg": "\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6b4c\u66f2\u6216\u8005\u6b4c\u624b"}
```
### 歌曲排行榜
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/music/rank/

**请求协议**
HTTP

**请求方法**
GET

**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/music/rank/&resultType=failure
```
{"ret": 0, "data": [{"musicid": "121244", "musicname": "\u4e03\u91cc\u9999", "musicsinger": "\u5468\u6770\u4f26", "musicalbum": "\u8303\u7279\u897f", "sub": 0}]}
```
### 推荐歌单
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/playlist/rank/

**请求协议**
HTTP

**请求方法**
GET

**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/playlist/rank/&resultType=failure
```
{"ret": 0, "data": [{"id": 61, "playlistname": "\u5df4\u8d6b\u4e0e\u8096\u90a6", "musicid_id": "33894312", "playlistimage": "img/109951163128461676.jpg", "playlistfounder": "\u6613\u9756\u51ef"}]}
```
### 登录
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/sign/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]|| |
|password|密码|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/sign/&resultType=failure
```
{"ret": 0}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/sign/
```
{"ret": 1}
```
### 获取用户数据
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/user/

**请求协议**
HTTP

**请求方法**
GET


**Query参数**：

| 参数名 | 说明 | 必填 | 类型 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userid|用户id|是|[string]|| |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |
|data|返回json格式数据|是|[json]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

data

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|data|返回json格式数据|是|[json]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/user/&resultType=failure
```
{"ret": 0, "data": []}
```

**失败示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/user/
```
{"ret": 1}
```
### 修改用户信息
#### 接口信息

**API Path**
api-v1/user/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
表单

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|userimage|用户头像|是|[file]| | | |
|username|用户名称|是|[string]| | | |
|password|密码|是|[string]| | | |
|information|信息|是|[string]| | | |
|introduce|简介|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=api-v1/user/&resultType=failure
```
{"ret": 0}
```
### 注册
#### 接口信息

**API Path**
http://124.220.169.238:8000/api/user/

**请求协议**
HTTP

**请求方法**
POST


**请求参数**
Json
Object

| 参数名 | 说明 | 必填 | 类型 | 值可能性 |  限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|username|昵称|是|[string]| | | |
|password|密码|是|[string]| | | |
|userid|用户id|是|[string]| | | |
**响应内容**：

**返回结果**

>成功 (200)
Json
Object

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 限制 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]| || |

**数据结构**：

返回实例

| 参数名  | 说明 | 必填 | 类型 | 值可能性 | 示例 |
| :------------ | :------------ | :------------ | :------------ | :------------ | :------------ |
|ret|返回为0或者1，0表示成功，1表示失败|是|[int]|||

**成功示例[Mock API]**：

**mock api**：https://result.eolink.com/?uri=http://124.220.169.238:8000/api/user/&resultType=failure
```
{"ret": 0}
```



# 五、数据库设计 [易靖凯]

## 5.1 数据库选择

​       我们数据比较少，需要传输部分图片，所以需要一个轻量级、传输速率块的数据库。而且数据库可移植性要好，需要满足我们从windows把整个数据库迁移到linux服务器当中，而且数据库连接比较灵活，可以通过django直接连接且接口丰富，所以我们最终选择MySQL作为后端数据库。
​        MySQL的优势：
​        1、速度： 运行速度快。
​        2、价格：MySQL对多数个人来说是免费的。
​        3、容易使用;与其他大型数据库的设置和管理相比，其复杂程度较低，容易学习。
​        4、可移植性： 能够工作在众多不同的系统平台上，例如：Windows 、Linux、Unix、MacOS等。
​        5、支持查询语言：MySQL可以利用标准SQL语法和支持ODBC（开放式数据库连接）的应用程序。
​        6、安全性和连接性; 十分灵活和安全的权限和密码系统，允许主机验证。连接到服务器时，所有的密码
均采用加密形式，从而保证了密码安全。并且由于MySQL时网络化的，因此可以在因特网网上的任何地方
访问，提高数据共享效率。

## 5.2 数据库设计

​       在数据库当中，需要缓存的数据是编辑推荐的三个歌单和排行榜的五首歌曲，以及大量的数十首可以随时播放的音乐数据和部分示例帖子，其余数据可以随着用户的创建和发布动态生成，我们根据前端需求设计了数据库，数据库表之间的衔接我们充分使用了django的orm，通过orm实现使用操作对象的方式来操作数据库中的数据。设置了大量的主键和外键，增加了表于表之间的联系，不管是通过外键访问还是查询都更加的方便。

### 用户表user

| 字段名            | 数据类型长度 | 是键  | 用途       | 备注 |
| ----------------- | ------------ | ----- | ---------- | ---- |
| username          | varchar(200) | false | 用户名称   |      |
| password          | varchar(200) | false | 密码       |      |
| userid            | varchar(200) | false | 用户id     | 主键 |
| information       | varchar(200) | false | 喜欢的歌手 |      |
| briefintroduction | varchar(200) | false | 简介       |      |
| userimg           | Imagefield   | false | 用户头像   |      |

  我们用户信息就是正常的用户名称、密码、用户id、头像、简介和喜欢的歌手

，用户id是用户表的主键，就是用户的电话号码，是唯一主键不可以修改。

### 文章表articles

| 字段名         | 数据类型长度 | 是键  | 用途       | 备注    |
| -------------- | ------------ | ----- | ---------- | ------- |
| articleid      | varchar(200) | false | 文章块的id | 主键    |
| articlecontent | varchar(200) | false | 文章块内容 |         |
| articlelike    | int(11)      | false | 点赞人数   | 默认为0 |
| articlecomment | int(11)      | false | 文章块内容 |         |
| articletime    | datetime(6)  | false | 发布时间   |         |
| userid_id      | varchar(200) | false | 用户id     | 外键    |
| articlepic1    | Imagefield   | false | 文章图片1  |         |
| Articlepic2    | Imagefield   | false | 文章图片2  |         |
| Articlepic3    | Imagefield   | false | 文章图片3  |         |

​        社区界面显示的文章部分有发帖时间、发帖人的信息、点赞、评论数，文章表的主键文章块的id，文章块的id是发布文章传到后端的时候随机生成的，用户的id加上当前的时间，点赞人数和评论人数刚发布的时候都是默认为0，当有人评论或者点赞的时候加一，userid_id是外键，对于user表里面的userid

### 评论表comment

| 字段名         | 数据类型长度 | 是键  | 用途       | 备注 |
| -------------- | ------------ | ----- | ---------- | ---- |
| id             | bigint(20)   | false | id         | 主键 |
| commenttime    | datetime(6)  | false | 评论时间   |      |
| articleid_id   | varchar(200) | false | 文章块的id | 外键 |
| userid_id      | varchar(200) | false | 用户id     | 外键 |
| commentcontent | varchar(200) | false | 评论内容   |      |

​        一个文章可以有多个评论，所以单独设置一个评论表，在社区界面显示评论的时候关于评论部分需要显示评论的内容、时间和评论的用户的信息，所以为了让评论和用户、评论和文章一一对应，评论表需要两个外键对应评论表的主键和文章表的主键。

### 音乐表music

| 字段名      | 数据类型长度 | 是键  | 用途     | 备注 |
| ----------- | ------------ | ----- | -------- | ---- |
| musicid     | varchar(200) | false | 音乐id   | 主键 |
| musicname   | varchar(200) | false | 音乐名称 |      |
| musicsinger | varchar(200) | false | 歌手     |      |
| musicalbum  | varchar(200) | false | 歌曲专辑 |      |

​        前端播放音乐的时候需要音乐的id，当前端用户点进去歌单详情之后需要显示歌单里的歌曲的名称、歌手和所属的专辑，因此音乐表的其他属性为名称、歌手和专辑。

### 历史表history

| 字段名     | 数据类型长度 | 是键  | 用途     | 备注 |
| ---------- | ------------ | ----- | -------- | ---- |
| id         | bigint(20)   | false | id       | 主键 |
| listentime | datetime(6)  | false | 听歌时间 |      |
| musicid_id | varchar(200) | false | 音乐id   | 外键 |
| perception | varchar(200) | false | 内容     |      |
| userid_id  | varchar(200) | false | 用户id   | 外键 |

​        历史表对应前端的音乐足迹，用户可以在音乐足迹查看自己的听歌记录，在音乐足迹页面可以之间播放歌曲，所以需要设置外键为音乐表的主键音乐的id，内容就是用户在听歌的时候的心情和感想，要与用户表对应，所以设置一个外键为用户表的主键用户id，因为前端最后要根据时间排序，所以需要听歌的时间，不同用户同一时间可以听同一首歌，也可以一直听一首歌，所以我们设置主键为自增。

### 歌单表playlist

| 字段名          | 数据类型长度 | 是键  | 用途       | 备注 |
| --------------- | ------------ | ----- | ---------- | ---- |
| id              | bigint(20)   | false | 歌单表的id | 主键 |
| playlistname    | varchar(200) | false | 歌单名称   |      |
| musicid_id      | varchar(200) | false | 音乐id     | 外键 |
| playlistfounder | varchar(200) | false | 歌单创建者 |      |
| playlistimg     | Imagefield   | false | 歌单封面   |      |

​        歌单显示需要一个封面和名称，一个歌单里可以有许多首歌曲，所以设置主键为自增，当用户创建歌单的时候将歌单创建者设置为创建歌单的用户，对歌单里的歌曲进行增加或者删除的时候，之后创建者和操作者是同一个人的时候才允许执行操作，防止对编辑推荐歌单或者是其他人创建之后分享的歌单进行操作。歌曲id就是在歌单里的音乐的id，所以音乐id和创建者都是外键对应歌曲表和用户表的主键

### 收藏歌单表playlistcollection

| 字段名       | 数据类型长度 | 是键  | 用途       | 备注 |
| ------------ | ------------ | ----- | ---------- | ---- |
| id           | varchar(200) | false | 收藏表的id | 主键 |
| playlistname | varchar(200) | false | 歌单名称   |      |
| userid_id    | int(11)      | false | 用户id     | 外键 |

​        当用户收藏歌曲之后就在收藏歌单表里面添加一条记录，表示用户收藏了这个歌单。同一个用户可以收藏多个歌单，不同用户也可以收藏同一个歌单。设置外键为用户的id.





## 5.3 ORM

### 一、ORM简介：

​       ORM方法论基于三个核心原则：1、简单：以最基本的形式建模数据;2、传达性：数据库结构被任何人都能理解的语言文档化;3、精确性：基于数据模型创建正确标准化的结构对象-关系映射(Object Relational Mapping，简称ORM),是随着面向对象的开发方法发展而产生的。用来把对象模型表示的对象映射到基于SQL的关系模型数据库结构中去。在具体的操作实体对象的时候，就不需要再去和复杂的SQL语句打交道，只需简单的操作实体对象的属性和方法，ORM技术是在对象和关系之间提供了一条桥梁，前台的对象型数据和数据库中的关系型的数据通过这个桥梁来相互转化，ORM 就是通过实例对象的语法，完成关系型数据库的操作的技术，是"对象-关系映射Object/Relational Mapping的缩写：

ORM                        DB
  类 --------------------> 表
对象 --------------------> 数据行
属性 --------------------> 字段

### 二、ORM特点：

​     ORM 使用对象，封装了数据库操作，因此可以不碰 SQL 语言。开发者只使用面向对象编程，与数据对象直接交互，不用关心底层数据库。可以方便实现： 增加(Create)、读取查询(Read)、更新(Update)和删除(Delete)

### 三、ORM 的优点：

​    • 数据模型都在一个地方定义，更容易更新和维护，也利于重用代码。
​    • ORM 有现成的工具，很多功能都可以自动完成，比如数据消毒、预处理、事务等等。
​    • 它迫使你使用 MVC 架构，ORM 就是天然的 Model，最终使代码更清晰。
​    • 基于 ORM 的业务代码比较简单，代码量少，语义性好，容易理解。
​    • 你不必编写性能不佳的 SQL。

### 四、ORM 的缺点：

​    • ORM 库不是轻量级工具，需要花很多精力学习和设置。
​    • 对于复杂的查询，ORM 要么是无法表达，要么是性能不如原生的 SQL。
​    • ORM 抽象掉了数据库层，开发者无法了解底层的数据库操作，也无法定制一些特殊的 SQL

# 六、微信小程序端的实现 [应瑞琦、柯俊锐]

## 6.1 主页展示的实现

​	     这部分在主页的顶部，用于展示当下最热门的歌曲的封面，列出编辑推荐的歌单，展示排行榜热度最高、排名最靠前的歌曲。此部分主要是数据的展示以及前端的工作。在从后端获取到对应的数据之后展示在前端显示即可，所以难度并不大。主要的任务在于前期页面的设计与代码上对设计图的还原。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps31.png" alt="img" style="zoom:50%;" /> 

## 6.2 编辑推荐歌单内容的实现

​	    当前的内容主要分为三部分，顶部图片、是否收藏过歌单的判断、歌单的列表。

​	    顶部的图片是在点击时传入，直接放在顶部，需要在跳转时携带相关的参数，即图片的链接，然后通过链接获取。

​	    是否收藏过歌单则需要在进入页面时向后端传回歌单的名字和当前用户的参数，通过返回的数字来决定是否收藏过，即收藏图标是否有颜色，并通过变量记录。再次点击时，通过变量值决定是取消收藏或是收藏，然后弹出对应的提示框，若用户选择确定，则向后端提交对应的动作，后端改变记录，方便后续再次进入该页面时再次判断，显示正确的收藏状态。在提交完对应数据之后，收藏状态改变颜色至对应的状态。这里重点在于每次展示时的状态是否正确，经过多次的逻辑上的验证与实验，发现结果均与预期一致。

​	    歌单列表是在进入界面时得到后端传入的包含相关信息的数据之后，传入对应组件然后按对应数量排列。在获取之后，通过函数再使用歌曲的ID获取到对应的歌曲信息，存入列表中，完成这些后，再次点击一首歌曲，传入列表以及对应歌曲的下标，跳转至歌曲播放页面，即可使用对应的信息完成歌曲的播放。

​	    此界面的难度在于，进入界面时携带了较多的参数，同时在进入前，有很多的函数需要严格的遵守顺序请求后端以及API来获取信息。比如要先确定当前的歌单是否收藏，然后确定收藏的图标的颜色。先获取歌单的所有歌曲信息，再初始化页面，避免加载时出现没有数据或者显示数据出错的情况，然后完成以上所有的步骤之后再获取歌曲信息列表。其中包含大量的异步函数操作与请求。所以在这上面花了大量的时间调试与分析正确的请求顺序与异步函数写法。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps32.png" alt="img" style="zoom: 50%;" /> 

## 6.3 歌曲排行榜的实现

​	  此页面与歌曲列表类似，在获取到信息之后，模仿编辑推荐列表完成的顺序与实现方法即可完成。区别在于在每个列表前展示了排名，在生成时通过循环确定排名，传入对应组件即可。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps33.png" alt="img" style="zoom:80%;" /> 

## 6.4 社区显示部分的实现

​	    社区中主要显示部分由一个个帖子的小组件获取信息后组成。在跳转至此页面之后，会先获取相关信息，然后再将信息填入组件中，根据信息的长度确定组件的数量，再将获取好信息的组件填入页面即可。此处的难度在于信息量较大，且需要获取图片并按照指定方式显示，所以最后采用获取图片的url然后将其放入指定的位置，然后再获取，但是缺点在于图片过大或网络不好时显示的时间过长。

​	    社区中帖子包含的信息较多，所以就对后端传输的信息要求非常高，打包对应信息时明确每一个信息的用处。

 <img src="C:\Users\易靖凯\Desktop\image-20220609232836013.png" alt="image-20220609232836013" style="zoom:25%;" />

## 6.5 点赞功能的实现

​	     点赞时，点击即发生变化，然后图标绑定的对应函数向后端发送信息，为了增加页面显示的连贯性以，点赞数量发生变化时的＋1动作是由前端代码实现，完成显示数量＋1，再次刷新页面后的点赞数量也可以与后端同步。取消点赞的实现也与其类似。

 <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610090046111.png" alt="image-20220610090046111" style="zoom:67%;" />

## 6.6 评论功能的显示与增加

​	     当点击评论按钮时，页面下端后会增加一个页面，用于显示已有的评论。此处的数据是也是点击后再从后端获取，内容也包括图片与数据，所以也要考虑异步的情况。在完成显示之后，若点击增加评论的按钮，则会进入新的页面，在此输入想要的评论，点击发布，就会打包收集输入的文本、当前时间、用户的信息传入后端，在后端对应的帖子下面增加一条记录。再次获取之后就可以看到自己的评论了。此部分难度在于异步的处理，需要先获取后端的信息再生成对应的评论组件。

 <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610090119137.png" alt="image-20220610090119137" style="zoom:67%;" />

 

## 6.7 发布帖子的完成

​	    发布帖子是我此次花费时间最多的功能点，主要任务在于从相册中选择图片之后再与帖子内容与用户信息打包上传至后端。网上相关代码较少，最后查阅官方文档之后选择了最合适的提交后端的写法。

​	    在选择想要的图片之后，将图片存入数组，再显示到页面下方，以供用户查看自己已选择的图片，再获取到文件的文件在手机中的路径，存入数组以便后续上传时使用。

 ![image-20220610090215535](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610090215535.png)

## 6.8 登录注册页面的实现

​        登录界面：用户需要输入手机号和密码进行登录，若成功登录则跳转到主页。

​        注册界面：用户注册时需要输入手机号(作为用户id)、用户名、密码进行注册，若注册成功则跳转到登录界面。

​        忘记密码界面：用户若忘记密码，只需要输入手机号以及新的密码，若修改成功则跳转到登录界面。

在输入手机号时，只会唤起用户的数字键盘；输入密码时，会隐藏输入的内容。在点击登录、注册、修改按钮时，先判断输入的手机号是否符合格式并且手机号和密码是否为空，若都不为空并且符合格式，则调用后端接口判断手机号和密码是否正确，若正确则登录成功，这样做可以提前判断输入的手机号和密码是否正确，而不是每一次点击都调用后端接口，减少了服务器的访问次数。

 ![image-20220610095144937](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610095144937.png)

 

## 6.9 个人信息页面的实现

​        个人页面有五个跳转部分，点击头像行可以跳转到修改个人资料页面，另外四个分别点击跳转到文字对应的页面；用户刚注册使用的是默认的头像和个性签名，可以在修改个人资料页面进行修改。该页面的难点是当跳转到这个页面时无法及时获取后端数据中的个人信息显示在顶部，因此出现当修改过个人信息之后，跳转过来时的信息是默认信息；之后我使用了Flutter中的FutureBuilder组件解决了这个问题[1]，将获取后端数据的函数放在FutureBuilder的future属性中，将需要渲染的布局文件放在Builder中，可以实现当成功获取数据之后再将获取到的数据对布局文件进行渲染，很好地解决了此类问题。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps48.png" alt="img" style="zoom: 67%;" /> 

 

## 6.10 修改个人信息页面的实现

​        此页面提供了两个输入框对用户名和个人简介进行修改，并且提供了一个加载图片的按钮，使得用户可以从相册中获取图片并且将其作为头像显示，当修改完成之后，点击按钮会将修改后的数据放进数据库，并且跳转到主页。

​       该页面的难点在于对imagePicker库的使用以及后端文件的传输。imagePicker作为获取图片的库，需要先对Android中的AndroidMainfest.xml进行配置，给予相应权限，并且在成功显示图片之后使用substring获取正确的图片路径，便于将正确的文件传给后端数据库；第二个难点是给后端传输文件不能只将文件名放入json格式中，需要使用flutter中的MultipartFile.fromFile函数才能正确地给后端数据库传输文件。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps49.png" alt="img" style="zoom:80%;" /> <img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps50.png" alt="img" style="zoom:80%;" />

 

## 6.11 歌单页面的实现

​        歌单页面由歌单名和歌单封面组成，用户可以在任意其他歌单点击收藏按钮，即可将歌单添加到我收藏的歌单的页面；用户可以在我的歌单的界面点击右上角加号创建新歌单，并且可以长按歌单对歌单进行删除。

​        该页面的难点在于新建歌单的提示框和页面的刷新。由于Flutter自带的提示框不能输入文字，因此需要自定义组件，使用自定义组件ReNameDialogContent，可以在弹出提示框时给予一行输入框供用户输入歌单名称。

​        由于对异步机制的不熟练，导致删除歌单或新建歌单之后，歌单并不会立刻出现或消失。这时可以通过setState()和FutureBuilder解决此类问题，对该页面的组件使用FutureBuilder，在创建或删除歌单之后调用setState()刷新页面，这时future中的函数会重新被调用，获取到后端被修改之后的数据并且将其正确地显示。

![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps51.png) ![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps52.png)

 ![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps53.png) ![img](file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps54.png)

​	

## 6.12 音乐足迹页面

音乐足迹中可以看到用户曾经听过并且记录下的歌曲和当时的时间，通过对歌曲的双击来显示当时听歌的心情。

<img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps55.png" alt="img" style="zoom:80%;" /> <img src="file:///C:\Users\易靖凯\AppData\Local\Temp\ksohtml12564\wps56.png" alt="img" style="zoom:80%;" /> 

 

## 6.13 搜索界面

​       用户可以通过首页的搜索框进行搜索，输入关键字并且点击搜索按钮，可以跳转到搜索结果界面，用户可以对歌单和歌曲进行模糊搜索，对歌单或歌曲点击则跳转到对应的歌单和歌曲播放节面。

​        这个界面采用了模糊匹配的方法，将用户输入的信息传入Result页面，并且在Result的两个Tab页面中都采用future函数，保证先获取到后端数据再渲染页面；调用后端搜索接口实现模糊搜索，即使用户输入信息不准确也能给予正确的显示结果。![image-20220610095410939](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610095410939.png)

## 6.14 音乐播放界面

​        通过对歌单中歌曲的点击跳转，将对应的歌曲列表（包括歌名、歌曲id、歌手信息等）传给音乐播放界面，音乐播放界面确定当前播放的歌曲以及相应信息，调用网易云接口获取歌词、播放链接等相应信息，并且将其显示在音乐播放界面。

​        用户可以点击相应按钮实现对应功能，并且用户可以通过单击右上角按钮将歌曲添加到用户创建的歌单，也可以单击右上角按钮将歌曲添加到音乐足迹中并且记录对应的心情。

​        难点在于音乐进度条、上一首下一首切换、暂停以及歌词显示[2]。

![image-20220610095606294](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220610095606294.png)

# 七、点名后端的实现[易靖凯]

## 7.1 后端取参方法

### 1、POST方法

request.method == 'POST'

#### form-data

request.params = json.loads(request.body)

request.FILES['userimage']

#### json

request.params = json.loads(request.body)

request.params['userid']

### 2、GET方法

#### json

request.method == 'GET'

request.GET.get("userid")

### 3、PUT方法

#### json

request.method == 'PUT'

request.params = json.loads(request.body)

request.params['userid']

### 4、DEL方法

#### json

request.method == 'DEL'

request.params = json.loads(request.body)

request.params['userid']

## 7.2 推荐模块

###      推荐歌单

​       数据库歌单记录的前五条为管理员手动插入数据，将该3条记录作为推荐歌单，歌单表中前五3条记录的歌单的创建者都为默认，所以不影响其他地方对于其他用户创建的歌单的使用。

​        <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231219028.png" alt="image-20220609231219028" style="zoom: 80%;" />

###       推荐歌曲

​        我们将歌曲表中的前10首作为推荐歌曲，由管理员手动插入数据，作为热歌榜的前五首.

​        ![image-20220609231255522](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231255522.png)

## 7.3 历史记录模块

###       获取历史记录

​        前端传值 通过request.GET.get("userid")取到用户id，History.objects.values().filter(userid=userId)，筛选要获取历史记录的用户的id，同时根据历史记录里的音乐id，去音乐表当中找到对应歌曲id的数据Music.objects.values("musicname").filter(musicid=i["musicid_id"])，将其加入到对应历史记录数据中返回给前端。

​        ![image-20220609231335126](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231335126.png)

###       提交历史记录

​         先取出所有的数据，因为历史记录表当中音乐id和用户id是外键，先通过musicId = Music.objects.get(musicid = musicId)

和User.objects.get(userid = userId)找到对应的用户和音乐数据，最后History.objects.create(listentime = listenTime,musicid = musicId,perception = perception,userid = userId, )创建相应的数据。

![image-20220609231351402](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231351402.png)

## 7.4 文章模块

###       发布评论

​        当一个用户在社区界面给一个文章发布评论的时候，我们需要知道发布评论的用户的id评论的内容，评论的文章的主键id，以及评论的时间，有了评论的时间，当前端需要获取某个文章的评论的时候，我们可以根据评论的时间进行排序之后返回给前端，因为前端页面的显示也是需要时间戳，当前端调用评论功能的接口，传给后端需要实现评论功能的全部参数，后端通过request.params['userid']、request.params['articleid']、request.params['commentcontent']、request.params['commenttime']，得到评论的用户的id、评论的内容、评论的文章的主键id以及评论的时间，接收之后存储到数据库当中，用户id和文章id都是评论表的外键，所以存储评论信息之前需要先通过用户id和文章id找到对应的记录：Article.objects.get(articleid=articleId)和User.objects.get(userid=userId)，然后将评论的数据存储到评论表里面

​          ![image-20220609231418206](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231418206.png)

###        获取某个文章的所有评论

​         前端需要文章的评论，向后端传一个文章的id，使用的是GET方法，后端通过request.GET.get('articleid')取出文章id，评论表的一个外键属性就是文章id，通过精确搜索Comment.objects.values().filter(articleid=articleId)找到需要的文章的所有评论，因为前端评论需要显示评论的用户的信息，我们查找出评论信息之后依次遍历评论信息，找到每条评论信    息里评论用户的id，再根据用户id去搜索用户表     list(User.objects.values().filter(userid=j['userid_id']))，找到用户表里对应的用户的头像、昵称、等需要显示在评论区的信息，然后data.append({"comment": commentData})填充到返回给前端的信息当中。

![image-20220609231439660](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231439660.png)

###       点赞

​         我们项目需求没有考虑显示社区的文章的点赞人数，所以只需要点赞即可，前端会判断用户是否对文章进行了点赞，如果进行点赞调用点赞接口，上传被点赞的文章的id，后端使用articleData.articlelike + 1让文章点赞数加一。最后调用articleData.save()保存修改之后的数据。

![image-20220609231531254](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231531254.png)

###       取消点赞

​          如果取消点赞调用取消点赞接口，上传取消点赞的文章的id，后端使用articleData.articlelike - 1让文章点赞数减一。最后调用articleData.save()保存修改之后的数据。

![image-20220609231503089](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231503089.png)

###      发布文章

​       前端传给后端发帖时间、发帖人的id、发帖的内容，文章的主键是在后端自动生成的，初始时文章的点赞数、评论数都默认为全0，    Article.objects.create(userid=userData,articlecontent=articleContent,articletime=articleTime,articleid=articleId,articlepic1=articlePic1,articlepic2=articlePic2,articlepic3=articlePic3)创建文章，创建成功返回返回给前端{'ret':0}，校验位为0.说明调用接口成功，成功发布文章，创建失败返回返回给前端{'ret':1}，校验位为1.说明调用接口失败

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231549101.png" alt="image-20220609231549101" style="zoom:80%;" />

###       删除文章

​         前端传给后端要删除的文章的id和用户id，在try语句里先Article.objects.get(articleid=articleId)查找文章表里是否有该条记录，如果没有说明前端传输的数据有误，返回给前端{'ret':1}，校验位为1.说明调用接口失败。如果可以在文章表里找到该条记录，就调用删除语句articleData.delete()删除该条记录。

![image-20220609231610734](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231610734.png)

###      返回所有文章

​        我们只需要返回所有的文章和相应文章对应的用户信息，文章所对应的评论不直接在社区界面显示，当用户点击显示评论的按钮之后才会显示，所以我们调用list(Article.objects.values())找出所有的文章信息，接着对该信息进行遍历，找出文章信息当中的文章创建者的userid，用这个id去查找用户信息list(User.objects.values().filter(userid=userId))，最后使用update({"articleuserdata":articleUserData[0]})将文章创建者的信息加入到文章的数据当中返回给前端。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231628054.png" alt="image-20220609231628054" style="zoom:80%;" />

###      返回用户的所有文章 

​        用户id是通过GET方法传参，request.GET.get("userid")取出用户id，我们调用list(Article.objects.values())，list(qs.filter(userid=userId))找出该用户创建的所有文章信息，将数据添加到数组里，返回给前端。如果为空数据就返回一个空数组给前端，查找语句放在try语句当中，当用户没有创建的文章，直接执行except语句，将空数组返回给前端。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231649075.png" alt="image-20220609231649075" style="zoom:80%;" />

## 7.5 用户模块

###      注册

​        注册的时候只要传输用户名、用户手机号、用户密码即可，用户手机号就是用户信息的主键，即为用户id当用户注册的时候，后端会根据try和except命名先查找用户数据User.objects.get(userid=userid)当发现后端存在该用户信息的时候，说明该用户已经注册，无需继续注册。如果用户没有注册则为用户注册信息，在用户表里插入用户新的信息：User.objects.create(username=userName,password=passWord,userid=userId,userimage=img)，同时调用PlayListCollection.objects.create(playlistname=userId + 'default', userid=userData)语句为用户创建一个用户id+‘defalut’的默认歌单，当用户没有收藏歌单的时候也可以收藏歌曲，同时在歌单表里创建该默认歌单和歌单封面，PlayList.objects.create(playlistname=userId+'default',playlistfounder=userId,playlistimage='/img/1255.png')

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231910888.png" alt="image-20220609231910888" style="zoom: 80%;" />

###      修改用户信息

​        在用户修改个人信息的时候，用户的手机号是必须要存在的，后端先进行用户是否存在的判断，调用后端的查询该用户信息User.objects.get(userid=userId)，如果后端没有这个用户的信息，则进行报错，先返回给前端校验位为1，前端根据校验位为'1'不为'0'得知调用接口是失败的，再读取失败的原因，如果ret为1，那么后面紧跟的msg里会携带错误原因，前端可以根据后端返回的错误通知用户。{'ret':1,'msg':'用户不存在'}，如果用户存在，后端开始对用户信息进行修改，用户可以修改除了id之外的任意信息，可以选择修改或者不修改，后端有判空处理，如果用户不修改某个属性，则前端传给后端的属性为空即可，后端判断如果传过来的属性不为空就可以进行修改，用户想要修改的内容和选择都是可以随机的，可以一个信息或者多个信息。使用modifyUser.save()将修改的信息存储到数据库。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231810712.png" alt="image-20220609231810712" style="zoom: 67%;" />

###       获取用户信息

​         用户个人界面或者点进去其他用户的时候都需要用户的所有信息，读取到用户的id，根据用户的id去用户表查询到用户的所有个人信息，前端还需要用户收藏的歌单和创建的歌单，我们调用PlayListCollection.objects.values("playlistname").filter(userid_id=userId).distinct()和list(PlayList.objects.values("playlistimage").filter(playlistname=j["playlistname"]))语句找到要查询信息的用户收藏的歌单的名称和封面，list(PlayList.objects.values("playlistname").filter(playlistfounder=userId).distinct())和list(PlayList.objects.values("playlistimage").filter(playlistname=i["playlistname"]))语句找到要查询信息的用户创建的歌单的名称和封面，在前端的个人信息页面当中需要展示用户创建了那些歌单、收藏了那些歌单，在前端显示的时候是只需要歌单的封面和歌单的名称即可，具体歌单里的歌曲和播放需要进入到另外的显示歌单详情的页面在具体显示歌单详情的页面再次调用显示歌单的接口即可，当需要通过点击用户头像跳转到其他用户的主页的时候再次调用这个接口即可。如果在查找期间报错说明用户id错误，返回给前端{'ret': 1}

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609231943805.png" alt="image-20220609231943805" style="zoom: 67%;" />

## 7.6 歌单模块

 

###    创建歌单

​     创建一个歌单需要创建歌单的用户的id、歌单名称、歌单封面即可创建一个空的歌单，PlayList.objects.create(playlistimage='/img/777.jpg',playlistfounder=playlistFounder,playlistname=playlistName,musicid =musicData)，将创建者设置为传来的用户id，music中id为-1是等同于歌单为空，防止出现空指针报错。每个新注册的用户都有个默认创建的歌单，即使用户收藏歌曲的时候没有创建过歌单，每个用户在注册的时候都配备了一个默认歌单用以收藏歌曲，因为我们项目中的歌曲是根据歌单来管理的，所以歌曲收藏之后需要放到歌单里。

###      收藏歌单

​        数据库的收藏表PlaylistCollection记录用户收藏歌单的记录，当用户想要收藏个歌单的时候调用收藏歌单接口，向后端传递用户id、用户要收藏的歌单的名称，后端通过request.params['userid']和request.params['playlistname']取出用户id、用户要收藏的歌单的名称，后端会通过PlayListCollection.objects.get(userid=userData,playlistname=playListName)语句检测该用户是否收藏过这个歌单，如果收藏过就是收藏重复的错误，后端返回给前端{'ret':1,'msg':'您已经收藏过该歌单'}的报错信息，前端通过校验位可以知道用户收藏歌单出错，打印错误信息。如果可以收藏，通过PlayListCollection.objects.create(userid=userData, playlistname=playListName)语句在收藏歌单表里添加一条收藏歌单的记录。并且返回{'ret':0}表示收藏成功

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232026690.png" alt="image-20220609232026690" style="zoom:80%;" />

###      删除创建的歌单

​       前端调用删除歌单的接口，向后端传输要删除的歌单的名称和用户id，我们先根据用户id和歌单的名称去查找歌单表PlayList.objects.get(playlistname = playListName,playlistfounder = userId,)，如果歌单表存在该用户创建的歌单，调用删除功能playListData.delete()从数据库删除这条记录，否则django判定数据库不存在该用户创建的名称为前端传给后端的歌单名称的记录返回给前端{'ret':1,'msg':'删除失败，记录不存在'}。如果删除成功返回给前端{'ret':0}，校验位为0.说明调用接口成功，后端成功删除歌单。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232057328.png" alt="image-20220609232057328" style="zoom:80%;" />

###      取消收藏歌单

​       前端调用删除歌单的接口，向后端传输要取消的歌单的名称和用户id，我们先根据用户id和歌单的名称去查找歌单收藏表PlayListCollection.objects.get(playlistname = playListName,userid = userId,)，如果歌单收藏表存在歌单名称符合，收藏用户id为前端传输的用户id，调用删除功能从数据库删除这条记录，否则django判定数据库不存在该用户收藏的歌单，收藏失败，返回给前端{'ret':1,'msg':'取消收藏失败，记录不存在'}。如果删除成功返回给前端{'ret':0}，校验位为0.说明调用接口成功，成功取消歌单

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232117112.png" alt="image-20220609232117112" style="zoom:80%;" />

###      是否已经收藏过该歌单

​        前端传给后端歌单名称和用户id，后端在数据库里查找歌单收藏表PlayListCollection.objects.get(userid=userData,playlistname=playListName)，如果歌单收藏表里存在这条记录说明用户已经收藏过这个歌单返回给前端{'ret':1}，如果歌单收藏表里不存在这条记录说明用户没有收藏过这个歌单，返回给前端{'ret':0}

 <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232133054.png" alt="image-20220609232133054" style="zoom:80%;" />

## 7.7 歌曲模块

###      收藏歌曲

​        用户想要收藏歌曲的时候必须指明要收藏到那个歌单里面，前端需要传给后端关于歌曲的所有的信息，歌曲id以及要把歌曲收藏到那个歌单里，我们在try语句当中执行PlayList.objects.get(musicid=musicId,playlistname=playlistName)查找该歌单当中是否已经收藏了这个歌曲。userid=PlayList.objects.get(playlistname=playlistName,playlistfounder=userId)判断要收藏歌曲的歌单是否是当前用户所创建的，只能在自己创建的歌单里收藏和取消收藏歌曲，因为用户id是歌单表的外键，所以要先通过用户id去用户表当中取出用户数据userdata=User.objects().filter(userid=userid)，然后在歌单表里创建新的歌单数据，将要收藏的歌曲放到相应的歌单里面PlayList.objects.create(musicid=musicData,playlistname=playlistName, playlistfounder=userdata)如果在执行try里面的语句报错，说明歌单里语句有该歌曲或者歌单不是用户创建的，在try相应的except语句当中返回给前端校验位ret为1，表示前端收藏歌曲失败，传入的数据有错，{'ret':1}，如果收藏成功返回给前端{'ret':0}表示调用接口成功

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232156434.png" alt="image-20220609232156434" style="zoom:80%;" />

###      取消收藏

​        前端调用删除歌单的接口，向后端传输要取消的歌曲的名称和歌单名称和用户id，我们先根据用户id和歌单的名称去查找歌单表PlayList.objects.get(playlistname = playlistName,musicid = musicId，playlistfunder=userid)，如果歌单表存在歌曲id符合，歌单名称为前端传到后端的歌单名称，创建者为当前用户，调用删除功能从数据库删除这条记录PlayListData.delete()，否则django判定数据库歌单中不存在该用户收藏的歌曲或者权限不够，取消收藏失败返回给前端{'ret':1,'msg':'取消收藏失败，记录不存在'}，如果删除成功返回给前端{'ret':0}，校验位为0.说明调用接口成功，成功取消收藏歌曲。

 <img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232211554.png" alt="image-20220609232211554" style="zoom:80%;" />

## 7.8 搜索模块

 

###      搜索歌曲或者歌手

​       request.GET.get('search')取出要搜索的内容的，list(Music.objects.filter(musicnamecontains=data).values())和list(Music.objects.filter(musicsingercontains=data).values())分别遍历歌曲名称和歌手名称，找到符合条件的数据，两次for循环是为了为了给每个歌曲增加一个下标，为了前端通过下标切换上首歌曲和下手歌曲，最后把数据返回给前端。如果为空就返回空值给前端。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232241450.png" alt="image-20220609232241450" style="zoom:80%;" />

###      搜索歌单

​        request.GET.get('search')取出要搜索的内容的，通过django提供的模糊搜索list(PlayList.objects.filter(playlistname__contains=data).values())找出所有名称符合的歌单，if playlistdata[i] not in result_data:是为了防止重复提交歌单给前端。最后将数据返回给前端，如果为空就返回空值给前端。

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232304076.png" alt="image-20220609232304076" style="zoom:80%;" />



# 八、系统测试[易靖凯]

## 8.1 单元测试

### 1、数据库测试

​        对于用户表，我们可以先创建一条数据，然后查询该数据并通过self.assertEqual()语句判断取出的值是否正常，在单元测试当中建立的数据不会保存到数据库，可以随意创建。

![打](C:\Users\易靖凯\Pictures\捕获.PNG)

### 2、接口测试

####     POST(form-data)

​     form-data类型数据需要先将数据放到字典里，再通过request.post方法传输，将返回值进行json话处理，然后再根据我们设计的校验位ret来判断返回值是否正常，self.user_url是我们要测试的api

​     ![](C:\Users\易靖凯\Desktop\捕获.PNG)

####     POST(json)

​     json格式传参的时候需要携带头文件headers = {"content-type":"application/json"}，通过request.post方法传值，数据放在json里。(self.playlist_url是我们要测试的url，将返回值进行json话处理，然后再根据我们设计的校验位ret来判断返回值是否正常

​     ![](C:\Users\易靖凯\Desktop\sttt.PNG)

####     DEL

​     del方法也是json格式传参的时候需要携带头文件headers = {"content-type":"application/json"}，通过request.delete方法传值，数据放在json里。(self.music_url是我们要测试的url，将返回值进行json话处理，然后再根据我们设计的校验位ret来判断返回值是否正常

​    ![](C:\Users\易靖凯\Desktop\ddd.PNG)

####     GET

​     get方法传值是要把数据携带在路径里，是query方式传参，通过？和&拼接数据，再通过request.get方法访问测试

​    ![](C:\Users\易靖凯\Desktop\ggg.PNG)

####     PUT

​     put方法json格式传参的时候需要携带头文件headers = {"content-type":"application/json"}，通过request.put方法传值，数据放在json里。(self.article_url是我们要测试的url，将返回值进行json话处理，然后再根据我们设计的校验位ret来判断返回值是否正常

​     ![](C:\Users\易靖凯\Desktop\uuu.PNG)

### 3、测试覆盖率

​      测试了所有的数据库表的增删改查和所有接口的POST、GET、PUT和DEL方法，测试示例达到34个，覆盖率基本达到了全面覆盖

​      ![](C:\Users\易靖凯\Desktop\ces.PNG)

## 8.2 集成测试

### 1、主页面

<img src="C:\Users\易靖凯\Desktop\图片1.png" style="zoom: 33%;" />

### 2、社区页面

#### 前端显示

<img src="C:\Users\易靖凯\Desktop\image-20220609232836013.png" alt="image-20220609232836013" style="zoom:25%;" />

#### 后端数据

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232924790.png" alt="image-20220609232924790" style="zoom:67%;" />

### 3、个人信息页面

#### 前端显示

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230640511.png" alt="image-20220609230640511" style="zoom: 50%;" />

#### 后端数据

![image-20220609230721096](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230721096.png)

### 4、修改个人信息

#### 前端显示

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232754488.png" alt="image-20220609232754488" style="zoom: 25%;" />

#### 后端数据

![image-20220609232739965](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609232739965.png)

### 5、搜索页面

#### 前端显示

<img src="C:\Users\易靖凯\Desktop\图片2.png" style="zoom: 33%;" />

#### 后端数据

![](C:\Users\易靖凯\Desktop\e1.PNG)

### 6、发布帖子

#### 前端显示

<img src="C:\Users\易靖凯\Desktop\微信图片_20220609233228.jpg" style="zoom:25%;" />

#### 后端数据

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609233206564.png" alt="image-20220609233206564" style="zoom:67%;" />

### 7、播放

#### 前端显示

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230212545.png" alt="image-20220609230212545" style="zoom:33%;" />

#### 后端数据

![image-20220609230303193](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230303193.png)

### 8、历史记录

#### 前端显示

<img src="C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230342852.png" alt="image-20220609230342852" style="zoom: 50%;" />

#### 后端数据

![image-20220609230601949](C:\Users\易靖凯\AppData\Roaming\Typora\typora-user-images\image-20220609230601949.png)

## 8.3 测试部署及结果

### MuiscStudio后端部署

​       我们MusicStudio的后端部署在百度云当中，Django有自带的管理员界面，如果可以通过官网地址访问到管理员界面，说明部署成功。

####  管理员界面

​       我们url为124.220.169.238:8000,如果部署正常，管理员地址应该为124.220.169.238:8000:api/admin/

![](C:\Users\易靖凯\Desktop\44444.PNG)

​        测试结果正常，可以正常访问

####  图片访问

​         我们url为124.220.169.238:8000,如果部署正常，我们的图片都放在media下面的img目录下

​         124.220.169.238:8000/media/img/0ee51f988635d262fe1d097f9671d3ff.jpeg图片可以正常访问

![](C:\Users\易靖凯\Desktop\6656.PNG)

​      测试结果正常，可以正常访问

# 九、系统部署 [易靖凯]

​       我们通过腾讯云服务器部署Django后端，在腾讯云安装MySQL数据库，和宝塔界面，MySQL支持windows到linux的数据迁移，将本地MySQL数据库在宝塔界面直接迁移到Linux的MySQL数据库数据库当中，配置python环境，然后在系统当中创建虚拟python环境，通过git从后端仓库将项目拉到服务器，在Django项目上传到仓库之前先执行pip3 freeze > requirements.txt生成 requirements.txt文件，在服务器的python虚拟环境中执行pip3 install -r requirements.txt生成相应的环境，因为项目比较小，无需设置代理，编写shell命令让Django执行python manage.py runserver 0.0.0.0:8000并且一直在后台运行，将访问的结果打印在djo.txt文件当中，方便进行测试和调试。

# 十、功能展示 [柯俊锐]

​          具体看演示视频

# 十一、清单  [柯俊锐]

• 前端代码: MusicStudio 项目

• 后端代码: MusicStudio_Back 项目

• 原型设计文件: docs/design 目录

• 项目演示视频: docs/videos 目录

• PPT: docs/PPT 目录

• 关系设计: docs/关系设计 目录

• 接口和数据库设计: docs/接口和数据库设计 目录

• 小组相关文档: docs/小组相关文档 目录

 

# 十二、总结  [应瑞琦、柯俊锐、易靖凯]

​        在完成MusicStudio项目之后，我们的前后端编程能力有了一些提升，可以更加熟练地使用Flutter绘制前端界面和使用Django完成后端部分，学会了如何调用NodeJs接口，并且对于一个项目的完整周期性以及文档的规范性有了一定的了解。具体的音乐的mp3文件，我们是通过调用网易云音乐的api，音乐的id是我们后端的音乐的id，通过后端传输的id去网易云音乐接口调用拿mp3文件在前端播放。因为版权的原因mp3文件只能在线调用，无法下载到本地，只能调用网易云音乐的接口去获取mp3，但是音乐除了mp3文件之外的所有部分都是在我们系统后端实现的，总的来说还是一个前后端分离的完整的项目架构。

​        在后端方面、因为我们使用了大量的外键，所以在插入数据的时候不能随意插入数据，要考虑到外键的存在，插入的数据在外键的表里一定要存在，不然会导致后端数据库报错，在代码当中，要详细考虑到代码的健壮性，所以用了比较多的try和except语句，将可能会查询信息报空指针错误的语句放到try里面执行，如果报错说明执行错误，直接在except语句返回ret校验位为1的错误，msg里携带错误原因返回给前端，在本次课程学习当中，我对Django的认识、使用有了更加深刻的理解，对于我对于其他后端的学习有一个很大的提升。

​        下一步我们将完善数据库的信息，提供更多可供用户收听的歌曲，并且为音乐播放加上随机播放、循环播放、单曲循环功能，完善社区页面存在的一些bug，并且设置一个能够直接从主页跳转到播放界面的浮动播放器。

# 十二、参考文献 [柯俊锐、易靖凯]

[1] FutureBuilder: https://api.flutter-io.cn/flutter/widgets/FutureBuilder-class.html

[2] 音乐播放界面: https://github.com/zhangrurong8/flutter_music_player

[3] Django学习: https://www.byhy.net/tut/webdev/django/

[4] Navcat学习:http://navicat.com.cn/

[5] MySQL学习:https://www.runoob.com/mysql/mysql-administration.html
